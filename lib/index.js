var t=function(){function t(){this.list=[],this.waitList=[],this.parallelNum=2}return t.prototype.add=function(t){var n=this;if(this.list.length<this.parallelNum){this.list.push(t);var i=t();return this.changeList(i),i}return new Promise((function(i,r){try{n.waitList.push({promise:t,cb:i})}catch(t){r(t)}}))},t.prototype.changeList=function(t){var n=this;t.then((function(){if(n.waitList.length>0){var t=n.waitList.shift(),i=null==t?void 0:t.promise();null==i||i.then((function(){null==t||t.cb()})),i&&n.changeList(i)}}))},t}(),n=function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return new Promise((function(r){t.apply(n,i).then((function(t){return r(t)}))}))},i=new t;export default function(t,r){for(var e=[],s=2;s<arguments.length;s++)e[s-2]=arguments[s];i.add((function(){return n(t,r,e)})).then((function(t){return Promise.resolve(t)}))}
