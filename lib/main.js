"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this.list=[],this.waitList=[],this.parallelNum=2}return t.prototype.add=function(t){var n=this;if(this.list.length<this.parallelNum){this.list.push(t);var i=t();return this.changeList(i),i}return new Promise((function(i,e){try{n.waitList.push({promise:t,cb:i})}catch(t){e(t)}}))},t.prototype.changeList=function(t){var n=this;t.then((function(){if(n.waitList.length>0){var t=n.waitList.shift(),i=null==t?void 0:t.promise();null==i||i.then((function(){null==t||t.cb()})),i&&n.changeList(i)}}))},t}(),n=function(t,n){for(var i=[],e=2;e<arguments.length;e++)i[e-2]=arguments[e];return new Promise((function(e){t.apply(n,i).then((function(t){return e(t)}))}))},i=new t;exports.default=function(t,e){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];i.add((function(){return n(t,e,r)})).then((function(t){return Promise.resolve(t)}))};
